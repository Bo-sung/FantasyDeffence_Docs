# 영지 시스템 상세

[← 영지 시스템 개요](영지%20시스템.md)

---

## 맵 스펙

### 격자 크기

| 항목 | 값 |
|------|-----|
| 전체 맵 | 30 × 30 타일 |
| 타일 크기 | 1 × 1 (기본 단위) |
| 성벽 두께 | 1 타일 |

### 고정 오브젝트

| 오브젝트 | 위치 | 크기 | 비고 |
|----------|------|------|------|
| 영주성 | 중앙 | 4 × 4 | 이동/삭제 불가 |
| 성벽 | 외곽 테두리 | 1타일 두께 | 맵 경계선 |

---

## 구역 확장 시스템

### 맵 구조 (비정형, 거리 기반)

```
            ┌─────────┐
            │  산악   │ 거리 3
        ┌───┴─────────┴───┐
        │      숲         │ 거리 2
    ┌───┴─────────────────┴───┐
    │         평원             │ 거리 1
┌───┴─────────────────────────┴───┐
│                                 │
│          ★ 영주성 ★             │ 거리 0
│         (시작 영역)              │
│                                 │
└───┬─────────────────────────┬───┘
    │         강변             │ 거리 1
    └───┬─────────────────┬───┘
        │      습지       │ 거리 2
        └───┬─────────┬───┘
            │  해안   │ 거리 3
            └─────────┘
```

### 구역 스펙 (거리 기반)

| 거리 | 구역 | 크기 | 해금 조건 | 해금 비용 | 특징 |
|------|------|------|-----------|-----------|------|
| 0 | 시작 영역 | 대형 | 기본 | - | 영주성 위치, 기본 건물 배치 |
| 1 | 평원 | 중형 | 영주성 Lv.10 | 5,000 | 농장 보너스 +10% |
| 1 | 강변 | 중형 | 영주성 Lv.10 | 5,000 | 물 관련 시설 (미래 확장) |
| 2 | 숲 | 소형 | 영주성 Lv.25 | 12,000 | 목재 시설 (미래 확장) |
| 2 | 습지 | 소형 | 영주성 Lv.25 | 12,000 | 특수 자원 (미래 확장) |
| 3 | 산악 | 소형 | 영주성 Lv.40 | 20,000 | 마력 정제소 보너스 +10% |
| 3 | 해안 | 소형 | 영주성 Lv.40 | 20,000 | 교역 시설 (미래 확장) |

### 확장 규칙

- **영주성 레벨** 조건 충족 시 해금 가능
- 같은 거리의 구역은 **방향 자유 선택** (평원 먼저 or 강변 먼저)
- **인접 구역 해금 필수** (건너뛰기 불가)
- 각 구역별 지형 보너스 적용
- 구역 간 건물 이동 가능 (해금된 구역만)

### 잠금 구역 표시

- 해금 가능: 반투명 + 레벨/비용 표시
- 해금 불가 (레벨 부족): 자물쇠 아이콘
- 해금 불가 (인접 미해금): 어둡게 처리
- 클릭 시 해금 조건 팝업

---

## 건물 스펙

### 생산 시설 (전투 자원)

| ID | 시설명 | 크기 | 최대 개수 | 해금 조건 |
|----|--------|------|-----------|-----------|
| B001 | 농장 | 2×2 | 4 | 기본 제공 |
| B002 | 마력 정제소 | 2×2 | 3 | 영주성 Lv.5 |
| B003 | 보급창고 | 2×2 | 3 | 영주성 Lv.15 |
| B004 | 훈련소 | 2×2 | 2 | 영주성 Lv.30 |

### 주거 시설 (인구)

| ID | 시설명 | 크기 | 인구 | 최대 개수 | 해금 조건 |
|----|--------|------|------|-----------|-----------|
| B011 | 민가 | 1×1 | 2 | 10 | 기본 제공 |
| B012 | 연립 주택 | 1×2 | 6 | 6 | 영주성 Lv.5 |
| B013 | 상가 건물 | 2×2 | 4 | 4 | 영주성 Lv.15 |

### 편의 시설 (만족도)

| ID | 시설명 | 크기 | 만족도 | 최대 개수 | 해금 조건 |
|----|--------|------|--------|-----------|-----------|
| B021 | 우물 | 1×1 | +5% | 6 | 기본 제공 |
| B022 | 방앗간 | 2×2 | +10% | 3 | 영주성 Lv.5 |
| B023 | 교회 | 2×3 | +15% | 1 | 영주성 Lv.15 |
| B024 | 광장 | 3×3 | +10% | 2 | 영주성 Lv.15 |
| B025 | 시장 | 3×2 | +20% | 1 | 영주성 Lv.30 |

### 군사 시설

| ID | 시설명 | 크기 | 최대 개수 | 해금 조건 |
|----|--------|------|-----------|-----------|
| B101 | 무기고 | 2×2 | 1 | 영주성 Lv.5 |
| B102 | 공병 작업장 | 2×2 | 1 | 영주성 Lv.15 |
| B103 | 수리실 | 2×2 | 1 | 기본 제공 |

### 기능 시설

| ID | 시설명 | 크기 | 최대 개수 | 해금 조건 |
|----|--------|------|-----------|-----------|
| B201 | 주점 | 3×2 | 1 | 기본 제공 |
| B202 | 대장간 | 2×2 | 1 | 영주성 Lv.5 |
| B203 | 도서관 | 2×2 | 1 | 영주성 Lv.45 |

### 장식 시설

| ID | 시설명 | 크기 | 최대 개수 | 획득 방법 |
|----|--------|------|-----------|-----------|
| D001 | 도로 | 1×1 | 무제한 | 은화 구매 |
| D002 | 가로등 | 1×1 | 20 | 은화 구매 |
| D003 | 분수 | 2×2 | 3 | 이벤트/상점 |
| D004 | 정원(소) | 2×2 | 5 | 은화 구매 |
| D005 | 정원(대) | 3×3 | 2 | 이벤트/상점 |

---

## 영주성

### 기능

- 영지 전체 해금 조건
- 레벨업 시 새로운 건물/기능 해금
- 영지 확장 (미래 확장용)

### 레벨별 해금 (만렙 50)

| 레벨 | 해금 내용 |
|------|-----------|
| 1 | 기본 (농장, 민가, 우물, 수리실, 주점) |
| 5 | 마력 정제소, 연립 주택, 방앗간, 무기고, 대장간 |
| 10 | 구역 확장 (거리 1: 평원, 강변) |
| 15 | 보급창고, 상가 건물, 교회, 광장, 공병 작업장 |
| 25 | 구역 확장 (거리 2: 숲, 습지) |
| 30 | 훈련소, 시장 |
| 40 | 구역 확장 (거리 3: 산악, 해안) |
| 45 | 도서관 |

---

## 생산 시스템

### 생산 공식

모든 생산 시설에 만족도 적용:

```
실제 생산량 = 기본 생산량 × 만족도
```

### 기본 생산량 (레벨별)

#### 농장 (식량)

| 레벨 | 시간당 생산 | 최대 저장량 | 업그레이드 비용 |
|------|-------------|-------------|-----------------|
| 1 | 60 | 500 | - |
| 2 | 90 | 750 | 은화 1,000 |
| 3 | 130 | 1,000 | 은화 2,500 |
| 4 | 180 | 1,500 | 은화 5,000 |
| 5 | 250 | 2,000 | 은화 10,000 |

#### 마력 정제소 (마석)

| 레벨 | 시간당 생산 | 최대 저장량 | 업그레이드 비용 |
|------|-------------|-------------|-----------------|
| 1 | 30 | 300 | - |
| 2 | 45 | 450 | 은화 1,500 |
| 3 | 65 | 600 | 은화 3,500 |
| 4 | 90 | 900 | 은화 7,000 |
| 5 | 120 | 1,200 | 은화 15,000 |

#### 보급창고 (보급)

| 레벨 | 시간당 생산 | 최대 저장량 | 업그레이드 비용 |
|------|-------------|-------------|-----------------|
| 1 | 40 | 400 | - |
| 2 | 60 | 600 | 은화 1,200 |
| 3 | 85 | 800 | 은화 3,000 |
| 4 | 115 | 1,200 | 은화 6,000 |
| 5 | 160 | 1,600 | 은화 12,000 |

#### 훈련소 (인력)

| 레벨 | 시간당 생산 | 최대 저장량 | 업그레이드 비용 |
|------|-------------|-------------|-----------------|
| 1 | 20 | 200 | - |
| 2 | 30 | 300 | 은화 2,000 |
| 3 | 45 | 450 | 은화 5,000 |
| 4 | 65 | 600 | 은화 10,000 |
| 5 | 90 | 800 | 은화 20,000 |

### 세금 시스템

#### 세금 공식

```
시간당 세금(은화) = 세금 계수 × 총 인구수 × 만족도
```

#### 세금 계수 (영주성 레벨, 만렙 50)

| 영주성 레벨 | 세금 계수 |
|-------------|-----------|
| 1 | 1.0 |
| 10 | 1.2 |
| 20 | 1.5 |
| 30 | 1.8 |
| 40 | 2.2 |
| 50 | 2.5 |

※ 중간 레벨은 선형 보간

#### 인구수 (주거 시설)

| 시설 | 레벨 1 | 레벨 2 | 레벨 3 | 레벨 4 | 레벨 5 |
|------|--------|--------|--------|--------|--------|
| 민가 | 2 | 3 | 4 | 5 | 6 |
| 연립 주택 | 6 | 9 | 12 | 15 | 18 |
| 상가 건물 | 4 | 6 | 8 | 10 | 12 |

#### 만족도 (편의 시설)

| 기본 만족도 | 50% |
|-------------|-----|
| 최대 만족도 | 150% |

| 시설 | 만족도 보너스 |
|------|---------------|
| 우물 | +5% |
| 방앗간 | +10% |
| 교회 | +15% |
| 광장 | +10% |
| 시장 | +20% |

#### 세금 예시

```
영주성 Lv.2 (계수 1.2)
민가 3개 (인구 6) + 연립 2개 (인구 12) = 총 인구 18
우물 2개 (+10%) + 방앗간 1개 (+10%) = 만족도 70%

시간당 세금 = 1.2 × 18 × 0.7 = 15.12 은화
```

### 수확 규칙

- 저장량 초과 시 생산 정지 (손실 없음, 대기)
- 생산 시설: 해당 건물 클릭으로 수확
- **세금: 영주성 클릭으로 수확**
- 전체 수확 버튼 제공 (생산 + 세금 일괄)

---

## 영웅 배치

### 배치 보너스

| 시설 | 배치 효과 | 최대 배치 |
|------|-----------|-----------|
| 농장 | 생산량 +20% | 1명 |
| 마력 정제소 | 생산량 +20% | 1명 |
| 보급창고 | 생산량 +20% | 1명 |
| 훈련소 | 생산량 +20% | 1명 |
| 수리실 | 수리 시간 -15% | 2명 |
| 대장간 | 강화 비용 -10% | 1명 |

### 특화 보너스

영웅의 클래스에 따라 추가 보너스:

| 클래스 | 특화 시설 | 추가 효과 |
|--------|-----------|-----------|
| 전사 | 훈련소 | 생산량 +10% 추가 |
| 궁수 | 보급창고 | 생산량 +10% 추가 |
| 마법사 | 마력 정제소 | 생산량 +10% 추가 |
| 성직자 | 수리실 | 수리 시간 -5% 추가 |

### 제약 사항

- 배치 중인 영웅은 전투 출격 불가
- 배치 해제 시 즉시 출격 가능
- 배치 변경 쿨타임 없음

---

## 건설 시스템

### 건설 프로세스

1. 건물 선택 (건설 메뉴)
2. 배치 위치 지정 (드래그)
3. 회전 조절 (버튼)
4. 건설 확정
5. 건설 완료 (즉시, 대기 시간 없음)

### 건설 비용

| 시설 | 최초 건설 비용 |
|------|----------------|
| 농장 | 은화 500 |
| 마력 정제소 | 은화 1,000 |
| 보급창고 | 은화 800 |
| 훈련소 | 은화 1,500 |
| 민가 | 은화 100 |
| 연립 주택 | 은화 300 |
| 상가 건물 | 은화 800 |
| 우물 | 은화 50 |
| 방앗간 | 은화 400 |
| 교회 | 은화 1,000 |
| 광장 | 은화 600 |
| 시장 | 은화 1,500 |
| 무기고 | 은화 2,000 |
| 공병 작업장 | 은화 1,500 |
| 수리실 | 기본 제공 |
| 주점 | 기본 제공 |
| 대장간 | 은화 1,200 |
| 도서관 | 은화 3,000 |

### 철거

- 철거 시 비용의 50% 환급
- 장식은 100% 환급
- 즉시 철거 (대기 시간 없음)

---

## 배치 검증 (서버)

### 검증 항목

| 항목 | 설명 |
|------|------|
| 좌표 범위 | 0 ≤ x, y < 현재 맵 크기 |
| 충돌 검사 | 다른 건물과 겹침 불가 |
| 고정 영역 | 영주성, 성벽 위치 배치 불가 |
| 건설 조건 | 해금 조건 충족 여부 |
| 최대 개수 | 건물별 최대 개수 초과 불가 |
| 회전 값 | 0, 90, 180, 270만 허용 |

### 에러 코드

| 코드 | 설명 |
|------|------|
| E001 | 좌표 범위 초과 |
| E002 | 건물 충돌 |
| E003 | 고정 영역 침범 |
| E004 | 해금 조건 미충족 |
| E005 | 최대 개수 초과 |
| E006 | 잘못된 회전 값 |
| E007 | 자원 부족 |

---

## 설정 테이블 (Config)

> 밸런싱 조정용 테이블. 코드 수정 없이 데이터만 변경하여 조정 가능.

### config_zone (구역 설정)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| zone_id | VARCHAR(10) | PK (Z001 등) |
| zone_name | VARCHAR(50) | 구역명 (평원, 강변 등) |
| distance | INT | 영주성과의 거리 (0~3) |
| unlock_castle_level | INT | 해금 필요 영주성 레벨 |
| unlock_cost | INT | 해금 비용 (은화) |
| size_type | VARCHAR(10) | 크기 (large/medium/small) |
| bonus_type | VARCHAR(20) | 보너스 대상 건물 ID (nullable) |
| bonus_rate | DECIMAL(3,2) | 보너스 배율 (1.1 = +10%) |

### config_building (건물 마스터)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| building_id | VARCHAR(10) | PK (B001 등) |
| building_name | VARCHAR(50) | 건물명 |
| category | VARCHAR(20) | 분류 (production/housing/comfort/military/function/deco) |
| size_x | INT | 가로 크기 |
| size_y | INT | 세로 크기 |
| max_count | INT | 최대 건설 개수 (0=무제한) |
| unlock_castle_level | INT | 해금 필요 영주성 레벨 |
| build_cost | INT | 건설 비용 (은화) |
| demolish_refund_rate | DECIMAL(3,2) | 철거 환급률 (0.5 = 50%) |
| max_hero_assign | INT | 영웅 배치 가능 수 |
| is_default | BOOLEAN | 기본 제공 여부 |

### config_building_level (건물 레벨별 수치)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| building_id | VARCHAR(10) | FK |
| level | INT | 레벨 (1~5) |
| upgrade_cost | INT | 업그레이드 비용 (은화) |
| production_per_hour | INT | 시간당 생산량 (생산 시설) |
| max_storage | INT | 최대 저장량 (생산 시설) |
| population | INT | 인구 (주거 시설) |
| comfort_bonus | DECIMAL(3,2) | 만족도 보너스 (편의 시설) |

**PK: (building_id, level)**

### config_castle_level (영주성 레벨별 설정)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| level | INT | PK (1~50) |
| tax_coefficient | DECIMAL(3,2) | 세금 계수 |
| unlock_buildings | TEXT | 해금 건물 ID 목록 (JSON) |
| unlock_zones | TEXT | 해금 구역 ID 목록 (JSON) |

### config_hero_assign_bonus (영웅 배치 보너스)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | INT | PK |
| building_id | VARCHAR(10) | 대상 건물 ID |
| hero_class | VARCHAR(20) | 영웅 클래스 (nullable = 모든 클래스) |
| bonus_type | VARCHAR(20) | 보너스 종류 (production/repair_time/cost) |
| bonus_value | DECIMAL(5,2) | 보너스 값 (0.2 = +20%, -0.15 = -15%) |

### config_global (전역 설정)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| key | VARCHAR(50) | PK |
| value | VARCHAR(100) | 값 |
| description | VARCHAR(200) | 설명 |

**전역 설정 예시:**

| key | value | description |
|-----|-------|-------------|
| map_size_x | 30 | 맵 가로 크기 |
| map_size_y | 30 | 맵 세로 크기 |
| base_satisfaction | 0.5 | 기본 만족도 (50%) |
| max_satisfaction | 1.5 | 최대 만족도 (150%) |
| offline_max_hours | 24 | 오프라인 생산 최대 시간 |
| castle_size_x | 4 | 영주성 가로 크기 |
| castle_size_y | 4 | 영주성 세로 크기 |

---

## 초기 데이터 예시

### config_zone 초기 데이터

| zone_id | zone_name | distance | unlock_castle_level | unlock_cost | bonus_type | bonus_rate |
|---------|-----------|----------|---------------------|-------------|------------|------------|
| Z000 | 시작 영역 | 0 | 1 | 0 | null | 1.0 |
| Z001 | 평원 | 1 | 10 | 5000 | B001 | 1.1 |
| Z002 | 강변 | 1 | 10 | 5000 | null | 1.0 |
| Z003 | 숲 | 2 | 25 | 12000 | null | 1.0 |
| Z004 | 습지 | 2 | 25 | 12000 | null | 1.0 |
| Z005 | 산악 | 3 | 40 | 20000 | B002 | 1.1 |
| Z006 | 해안 | 3 | 40 | 20000 | null | 1.0 |

### config_building 초기 데이터 (일부)

| building_id | building_name | category | size_x | size_y | max_count | unlock_castle_level | build_cost |
|-------------|---------------|----------|--------|--------|-----------|---------------------|------------|
| B001 | 농장 | production | 2 | 2 | 4 | 1 | 500 |
| B002 | 마력 정제소 | production | 2 | 2 | 3 | 5 | 1000 |
| B003 | 보급창고 | production | 2 | 2 | 3 | 15 | 800 |
| B004 | 훈련소 | production | 2 | 2 | 2 | 30 | 1500 |
| B011 | 민가 | housing | 1 | 1 | 10 | 1 | 100 |
| B012 | 연립 주택 | housing | 1 | 2 | 6 | 5 | 300 |
| B021 | 우물 | comfort | 1 | 1 | 6 | 1 | 50 |
| B022 | 방앗간 | comfort | 2 | 2 | 3 | 5 | 400 |
| B101 | 무기고 | military | 2 | 2 | 1 | 5 | 2000 |
| B201 | 주점 | function | 3 | 2 | 1 | 1 | 0 |

### config_building_level 초기 데이터 (농장)

| building_id | level | upgrade_cost | production_per_hour | max_storage | population | comfort_bonus |
|-------------|-------|--------------|---------------------|-------------|------------|---------------|
| B001 | 1 | 0 | 60 | 500 | 0 | 0 |
| B001 | 2 | 1000 | 90 | 750 | 0 | 0 |
| B001 | 3 | 2500 | 130 | 1000 | 0 | 0 |
| B001 | 4 | 5000 | 180 | 1500 | 0 | 0 |
| B001 | 5 | 10000 | 250 | 2000 | 0 | 0 |

### config_building_level 초기 데이터 (민가)

| building_id | level | upgrade_cost | production_per_hour | max_storage | population | comfort_bonus |
|-------------|-------|--------------|---------------------|-------------|------------|---------------|
| B011 | 1 | 0 | 0 | 0 | 2 | 0 |
| B011 | 2 | 500 | 0 | 0 | 3 | 0 |
| B011 | 3 | 1200 | 0 | 0 | 4 | 0 |
| B011 | 4 | 2500 | 0 | 0 | 5 | 0 |
| B011 | 5 | 5000 | 0 | 0 | 6 | 0 |

### config_building_level 초기 데이터 (우물)

| building_id | level | upgrade_cost | production_per_hour | max_storage | population | comfort_bonus |
|-------------|-------|--------------|---------------------|-------------|------------|---------------|
| B021 | 1 | 0 | 0 | 0 | 0 | 0.05 |
| B021 | 2 | 300 | 0 | 0 | 0 | 0.07 |
| B021 | 3 | 800 | 0 | 0 | 0 | 0.10 |

### config_castle_level 초기 데이터 (일부)

| level | tax_coefficient | unlock_buildings                     | unlock_zones    |
| ----- | --------------- | ------------------------------------ | --------------- |
| 1     | 1.0             | ["B001","B011","B021","B103","B201"] | ["Z000"]        |
| 5     | 1.1             | ["B002","B012","B022","B101","B202"] | []              |
| 10    | 1.2             | []                                   | ["Z001","Z002"] |
| 15    | 1.3             | ["B003","B013","B023","B024","B102"] | []              |
| 25    | 1.5             | []                                   | ["Z003","Z004"] |
| 30    | 1.8             | ["B004","B025"]                      | []              |
| 40    | 2.2             | []                                   | ["Z005","Z006"] |
| 45    | 2.3             | ["B203"]                             | []              |
| 50    | 2.5             | []                                   | []              |

### config_hero_assign_bonus 초기 데이터

| id | building_id | hero_class | bonus_type | bonus_value |
|----|-------------|------------|------------|-------------|
| 1 | B001 | null | production | 0.20 |
| 2 | B001 | farmer | production | 0.10 |
| 3 | B002 | null | production | 0.20 |
| 4 | B002 | mage | production | 0.10 |
| 5 | B003 | null | production | 0.20 |
| 6 | B003 | archer | production | 0.10 |
| 7 | B004 | null | production | 0.20 |
| 8 | B004 | warrior | production | 0.10 |
| 9 | B103 | null | repair_time | -0.15 |
| 10 | B103 | healer | repair_time | -0.05 |
| 11 | B202 | null | cost | -0.10 |

---

## 런타임 테이블 (User Data)

> 유저별 실시간 데이터.

### 테이블: user_zone_unlock (구역 해금)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | BIGINT | PK |
| user_id | BIGINT | 유저 ID (FK) |
| zone_id | VARCHAR(10) | 구역 ID (FK) |
| unlocked_at | DATETIME | 해금 시각 |

### 테이블: building_placement (건물 배치)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | BIGINT | PK |
| user_id | BIGINT | 유저 ID (FK) |
| building_id | VARCHAR(10) | 건물 ID (FK → config_building) |
| zone_id | VARCHAR(10) | 배치된 구역 ID (FK) |
| x | INT | X 좌표 (0~맵크기-1) |
| y | INT | Y 좌표 (0~맵크기-1) |
| rotation | INT | 회전 (0, 90, 180, 270) |
| level | INT | 건물 레벨 (1~5) |
| created_at | DATETIME | 건설 시각 |
| updated_at | DATETIME | 수정 시각 |

### 테이블: building_production

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | BIGINT | PK |
| placement_id | BIGINT | 배치 ID (FK) |
| resource_type | VARCHAR(10) | 자원 종류 |
| stored_amount | INT | 현재 저장량 |
| last_harvest_at | DATETIME | 마지막 수확 시각 |

### 테이블: building_hero_assign (영웅 배치)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | BIGINT | PK |
| placement_id | BIGINT | 배치 ID (FK) |
| hero_id | BIGINT | 영웅 ID (FK) |
| assigned_at | DATETIME | 배치 시각 |

### 테이블: user_estate (유저 영지 상태)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| user_id | BIGINT | PK, FK |
| castle_level | INT | 영주성 레벨 (1~50) |
| accumulated_tax | INT | 누적 세금 (미수령) |
| last_tax_calc_at | DATETIME | 마지막 세금 계산 시각 |
| last_login_at | DATETIME | 마지막 접속 시각 |

---

## API 명세 (참고)

### 건물 배치

```
POST /api/estate/building/place
{
  building_id: "B001",
  x: 5,
  y: 7,
  rotation: 0
}
```

### 건물 이동

```
POST /api/estate/building/move
{
  placement_id: 123,
  x: 8,
  y: 10,
  rotation: 90
}
```

### 자원 수확

```
POST /api/estate/harvest
{
  placement_id: 123  // 개별 수확
}

POST /api/estate/harvest-all
{}  // 전체 수확
```

### 영웅 배치

```
POST /api/estate/hero/assign
{
  placement_id: 123,
  hero_id: 456
}

POST /api/estate/hero/unassign
{
  placement_id: 123
}
```

---

## 관련 문서

- [영지 시스템](영지%20시스템.md) - 개요
- [재화 시스템](재화%20시스템.md) - 자원 종류
- [스테이지 시스템](스테이지%20시스템.md) - 자원 소모

# 장비 시스템

[← README로 돌아가기](../README.md)

---

## 개요

영웅에게 장착하여 스탯을 강화하는 시스템. 대장간에서 제작하거나 스테이지에서 획득합니다.

---

## 장비 슬롯

영웅당 3개 슬롯:

| 슬롯 | 주요 스탯 | 부여 가능 옵션 |
|------|-----------|----------------|
| 무기 | ATK 또는 MAG | SPD, CRT |
| 방어구 | HP, DEF, RES | EVA |
| 액세서리 | 특수 효과 | CRT, EVA, SPD, RNG |

---

## 장비 등급

| 등급 | 색상 | 기본 스탯 배율 | 옵션 슬롯 | 획득 경로 |
|------|------|----------------|-----------|-----------|
| 일반 | 흰색 | ×1.0 | 0 | 스테이지 드롭 |
| 고급 | 녹색 | ×1.3 | 1 | 스테이지 드롭, 대장간 |
| 희귀 | 파랑 | ×1.6 | 2 | 대장간, 이벤트 |
| 전설 | 보라 | ×2.0 | 2 + 세트 효과 | 대장간 (고급 레시피), 이벤트 |

---

## 장비 스탯

### 기본 스탯 (슬롯별)

#### 무기

| 레벨 대역 | ATK형 기본값 | MAG형 기본값 |
|-----------|-------------|-------------|
| Lv.1~20 | 10~30 | 10~30 |
| Lv.21~50 | 30~70 | 30~70 |
| Lv.51~80 | 70~120 | 70~120 |
| Lv.81~100 | 120~180 | 120~180 |

※ 실제 값 = 기본값 × 등급 배율

#### 방어구

| 레벨 대역 | HP 기본값 | DEF 기본값 | RES 기본값 |
|-----------|----------|-----------|-----------|
| Lv.1~20 | 50~150 | 5~15 | 5~15 |
| Lv.21~50 | 150~350 | 15~35 | 15~35 |
| Lv.51~80 | 350~600 | 35~60 | 35~60 |
| Lv.81~100 | 600~1000 | 60~100 | 60~100 |

#### 액세서리

| 레벨 대역 | 가능 스탯 | 범위 |
|-----------|----------|------|
| Lv.1~20 | CRT/EVA | 1~3% |
| Lv.21~50 | CRT/EVA/SPD | 3~6% |
| Lv.51~80 | CRT/EVA/SPD/RNG | 6~10% |
| Lv.81~100 | CRT/EVA/SPD/RNG | 10~15% |

### 부가 옵션 (랜덤)

장비 생성 시 등급에 따라 부가 옵션이 랜덤 부여:

| 옵션 | 수치 범위 | 비고 |
|------|-----------|------|
| ATK +N | 5~50 | 고정값 |
| MAG +N | 5~50 | 고정값 |
| HP +N | 20~200 | 고정값 |
| DEF +N | 3~30 | 고정값 |
| RES +N | 3~30 | 고정값 |
| CRT +N% | 1~5% | 비율 |
| EVA +N% | 1~5% | 비율 |
| SPD +N% | 1~5% | 비율 |

---

## 강화 시스템

### 강화 단계

최대 +10 강화. 강화 시 기본 스탯 증가.

| 강화 | 스탯 증가 | 누적 증가율 | 은화 비용 | 재료 수 |
|------|-----------|------------|-----------|---------|
| +1 | +5% | 105% | 200 | 1 |
| +2 | +5% | 110% | 400 | 1 |
| +3 | +5% | 115% | 800 | 2 |
| +4 | +5% | 120% | 1,500 | 2 |
| +5 | +8% | 128% | 3,000 | 3 |
| +6 | +8% | 136% | 5,000 | 3 |
| +7 | +8% | 144% | 8,000 | 4 |
| +8 | +10% | 154% | 12,000 | 4 |
| +9 | +10% | 164% | 18,000 | 5 |
| +10 | +12% | 176% | 25,000 | 5 |

### 강화 재료

| 재료 | 획득처 |
|------|--------|
| 강화석 (소) | 일일 던전, 스테이지 드롭 |
| 강화석 (중) | 일일 던전 (고급), 이벤트 |
| 강화석 (대) | 이벤트, 상점 |

- 강화 +1~+4: 강화석 (소) 사용
- 강화 +5~+7: 강화석 (중) 사용
- 강화 +8~+10: 강화석 (대) 사용

### 강화 실패 (선택적, Phase 2+)

- Phase 1: 강화 항상 성공
- Phase 2+: +7 이상 실패 확률 도입 검토

---

## 대장간 제작

### 제작 조건

- 영지 대장간 시설 필요 (영주성 Lv.5 해금)
- 레시피 + 재료 + 은화

### 레시피 구조

| 항목 | 설명 |
|------|------|
| 결과물 | 특정 장비 또는 등급/슬롯 지정 |
| 재료 | 하위 등급 장비 + 제작 재료 |
| 비용 | 은화 |
| 제작 시간 | 즉시 (Phase 1) |

### 레시피 예시

| 레시피 | 결과 | 재료 | 은화 |
|--------|------|------|------|
| 고급 무기 제작 | 고급 무기 (랜덤) | 일반 무기 ×3 + 철광석 ×5 | 1,000 |
| 희귀 무기 제작 | 희귀 무기 (랜덤) | 고급 무기 ×2 + 정제 철광석 ×3 | 3,000 |
| 전설 무기 제작 | 전설 무기 (랜덤) | 희귀 무기 ×2 + 마력 결정 ×5 | 10,000 |

### 제작 재료

| 재료 | 등급 | 획득처 |
|------|------|--------|
| 철광석 | 기본 | 스테이지 드롭, 일일 던전 |
| 마력 파편 | 기본 | 스테이지 드롭, 일일 던전 |
| 정제 철광석 | 중급 | 일일 던전 (수요일) |
| 마력 결정 | 고급 | 이벤트, 상점 |

---

## 장비 분해

| 등급 | 분해 결과 |
|------|-----------|
| 일반 | 은화 50 |
| 고급 | 은화 200 + 강화석 (소) ×1 |
| 희귀 | 은화 500 + 강화석 (중) ×1 |
| 전설 | 은화 1,500 + 강화석 (대) ×1 |

- 강화된 장비 분해 시 강화 재료 일부 반환 (투입량의 50%)

---

## 세트 효과 (전설 등급 전용)

같은 세트의 장비를 복수 장착 시 추가 효과:

| 세트 | 2세트 효과 | 3세트 효과 |
|------|-----------|-----------|
| 전사의 맹세 | ATK +10% | CRT +5% |
| 수호자의 의지 | DEF +10% | HP +15% |
| 마법사의 지혜 | MAG +10% | 스킬 쿨다운 -10% |
| 사냥꾼의 본능 | SPD +10% | EVA +5% |

---

## 설정 테이블 (Config)

### config_equipment (장비 마스터)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| equipment_id | VARCHAR(10) | PK (W001, A001, X001 등) |
| equipment_name | VARCHAR(50) | 장비명 |
| slot_type | VARCHAR(10) | 슬롯 (weapon/armor/accessory) |
| grade | VARCHAR(10) | 등급 (common/uncommon/rare/legendary) |
| level_requirement | INT | 장착 가능 레벨 |
| main_stat_type | VARCHAR(10) | 주 스탯 종류 (atk/mag/hp/def/res/crt/eva/spd) |
| main_stat_value | INT | 주 스탯 기본값 |
| option_slot_count | INT | 부가 옵션 슬롯 수 |
| set_id | VARCHAR(10) | 세트 ID (nullable) |

### config_equipment_enhance (강화 테이블)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| enhance_level | INT | PK (1~10) |
| stat_increase_rate | DECIMAL(3,2) | 스탯 증가율 (0.05 = +5%) |
| cost_silver | INT | 은화 비용 |
| material_count | INT | 강화석 수량 |
| material_tier | VARCHAR(10) | 강화석 등급 (small/medium/large) |

### config_craft_recipe (제작 레시피)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| recipe_id | VARCHAR(10) | PK |
| result_slot_type | VARCHAR(10) | 결과물 슬롯 타입 |
| result_grade | VARCHAR(10) | 결과물 등급 |
| result_equipment_id | VARCHAR(10) | 특정 장비 ID (nullable = 랜덤) |
| cost_silver | INT | 은화 비용 |

### config_craft_material (제작 재료)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | INT | PK |
| recipe_id | VARCHAR(10) | FK → config_craft_recipe |
| material_type | VARCHAR(20) | 재료 종류 (equipment/item) |
| material_id | VARCHAR(10) | 재료 ID |
| count | INT | 필요 수량 |

### config_set_effect (세트 효과)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | INT | PK |
| set_id | VARCHAR(10) | 세트 ID |
| required_count | INT | 필요 장착 수 (2 또는 3) |
| bonus_stat | VARCHAR(10) | 보너스 스탯 종류 |
| bonus_value | DECIMAL(5,2) | 보너스 값 |

---

## 서버 DB 스키마 (User Data)

### user_equipment (보유 장비)

| 컬럼 | 타입 | 설명 |
|------|------|------|
| id | BIGINT | PK |
| user_id | BIGINT | FK |
| equipment_id | VARCHAR(10) | FK → config_equipment |
| enhance_level | INT | 강화 단계 (0~10) |
| option_1_stat | VARCHAR(10) | 부가 옵션 1 스탯 (nullable) |
| option_1_value | INT | 부가 옵션 1 수치 |
| option_2_stat | VARCHAR(10) | 부가 옵션 2 스탯 (nullable) |
| option_2_value | INT | 부가 옵션 2 수치 |
| equipped_hero_id | BIGINT | 장착 영웅 ID (nullable = 미장착) |
| created_at | DATETIME | 획득 시각 |

---

## 관련 문서

- [데이터 테이블](데이터%20테이블.md) - 전체 시스템 데이터 구조
- [육성 시스템](영웅/육성%20시스템.md) - 영웅 장비 슬롯
- [영지 시스템](영지%20시스템.md) - 대장간 시설
- [재화 시스템](재화%20시스템.md) - 은화 소모
- [스탯 시스템](스탯%20시스템.md) - 스탯 정의

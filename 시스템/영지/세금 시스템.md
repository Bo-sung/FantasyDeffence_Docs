---
tags: [plan, server]
---

# 세금 시스템

[← 영지 시스템](../영지%20시스템.md)

---

## 세금 공식

```
시간당 세금(은화) = 세금 계수 × 총 인구수 × 만족도
```

---

## 영주성 레벨별 세금 계수 (만렙 50)

| 영주성 레벨 | 세금 계수 |
|-------------|-----------|
| 1 | 1.0 |
| 5 | 1.1 |
| 10 | 1.2 |
| 15 | 1.3 |
| 20 | 1.5 |
| 25 | 1.5 |
| 30 | 1.8 |
| 40 | 2.2 |
| 45 | 2.3 |
| 50 | 2.5 |

※ 중간 레벨은 선형 보간

---

## 영주성 레벨업 비용

> **레벨업 공식**: 비용은 레벨에 따라 지수적으로 증가
>
> 마일스톤 레벨(5, 10, 15, 25, 30, 40, 45, 50)에서 새로운 건물/기능 해금

| 레벨 | 비용 (은화) | 해금 내용 |
|------|------------|-----------|
| 1 | - | 농장, 민가, 우물, 수리실, 주점 (기본) |
| 2 | 1,000 | - |
| 3 | 2,000 | - |
| 4 | 3,500 | - |
| 5 | 5,000 | 마력 정제소, 연립 주택, 방앗간, 무기고, 대장간 |
| 6 | 7,000 | - |
| 7 | 9,000 | - |
| 8 | 12,000 | - |
| 9 | 15,000 | - |
| 10 | 20,000 | 영역 확장 구매 해금 |
| 11 | 25,000 | - |
| 12 | 30,000 | - |
| 13 | 37,000 | - |
| 14 | 45,000 | - |
| 15 | 55,000 | 보급창고, 상가 건물, 교회, 광장, 공병 작업장 |
| 16 | 65,000 | - |
| 17 | 75,000 | - |
| 18 | 90,000 | - |
| 19 | 105,000 | - |
| 20 | 120,000 | - |
| 21 | 135,000 | - |
| 22 | 150,000 | - |
| 23 | 165,000 | - |
| 24 | 180,000 | - |
| 25 | 200,000 | - |
| 26 | 220,000 | - |
| 27 | 240,000 | - |
| 28 | 260,000 | - |
| 29 | 280,000 | - |
| 30 | 300,000 | 훈련소, 시장 |
| 31 | 330,000 | - |
| 32 | 360,000 | - |
| 33 | 400,000 | - |
| 34 | 450,000 | - |
| 35 | 500,000 | - |
| 36 | 550,000 | - |
| 37 | 600,000 | - |
| 38 | 660,000 | - |
| 39 | 720,000 | - |
| 40 | 800,000 | - |
| 41 | 880,000 | - |
| 42 | 960,000 | - |
| 43 | 1,050,000 | - |
| 44 | 1,150,000 | - |
| 45 | 1,250,000 | 도서관 |
| 46 | 1,350,000 | - |
| 47 | 1,450,000 | - |
| 48 | 1,600,000 | - |
| 49 | 1,750,000 | - |
| 50 | 2,000,000 | 최고 레벨 |

※ 총 누적 비용 (Lv.1 → Lv.50): 약 2,500만 은화

---

## 인구수 (주거 시설 레벨별)

| 시설 | Lv.1 | Lv.2 | Lv.3 | Lv.4 | Lv.5 |
|------|------|------|------|------|------|
| 민가 | 2 | 3 | 4 | 5 | 6 |
| 연립 주택 | 6 | 9 | 12 | 15 | 18 |
| 상가 건물 | 4 | 6 | 8 | 10 | 12 |

---

## 세금 수령

- **영주성 클릭** → 누적 세금 수령
- **전체 수확 버튼**으로도 수령 가능

---

## 세금 예시

```
영주성 Lv.10 (계수 1.2)
민가 3개 (인구 6) + 연립 2개 (인구 12) = 총 인구 18
우물 2개 (+10%) + 방앗간 1개 (+10%) = 만족도 70%

시간당 세금 = 1.2 × 18 × 0.7 = 15.12 은화
```

---

## 세금 계산 함수

```csharp
public void UpdateTax(float deltaSeconds)
{
    float satisfaction = CalculateSatisfaction();
    float taxCoeff = ConfigCastle.Get(_gameState.CastleLevel).TaxCoefficient;

    int totalPopulation = 0;
    foreach (var building in _gameState.Buildings)
    {
        var config = ConfigBuilding.Get(building.BuildingId);
        if (config.Category == BuildingCategory.HOUSING)
        {
            totalPopulation += config.Levels[building.Level].Population;
        }
    }

    float taxPerHour = taxCoeff * totalPopulation * satisfaction;
    float taxEarned = (taxPerHour / 3600f) * deltaSeconds;
    _gameState.AccumulatedTax += taxEarned;
}

public void HarvestTax()
{
    _gameState.Silver += Mathf.FloorToInt(_gameState.AccumulatedTax);
    _gameState.AccumulatedTax = 0f;
}
```

---
tags: [plan, server]
---

# 만족도 시스템

[← 영지 시스템](../영지%20시스템.md)

---

## 만족도 계산

```
만족도 = 기본(50%) + Σ(편의 시설 보너스)
범위: 50% ~ 150%
```

| 항목 | 값 |
|------|-----|
| 기본 만족도 | 50% |
| 최대 만족도 | 150% |

---

## 편의 시설 보너스

| 시설 | Lv.1 | Lv.2 | Lv.3 | Lv.4 | Lv.5 |
|------|------|------|------|------|------|
| 우물 | +5% | +7% | +10% | +12% | +15% |
| 방앗간 | +10% | +12% | +15% | +18% | +20% |
| 교회 | +15% | - | - | - | - |
| 광장 | +10% | - | - | - | - |
| 시장 | +20% | - | - | - | - |

---

## 만족도 영향

만족도는 **모든 생산**에 곱연산으로 적용된다:

- 생산 시설 산출량 × 만족도
- 세금 산출량 × 만족도

---

## 예시

```
편의 시설: 우물 2개(+10%) + 방앗간 1개(+10%)
만족도 = 50% + 10% + 10% = 70%

농장 Lv.1 기본 생산: 60/시간
실제 생산: 60 × 0.7 = 42/시간

→ 우물 4개 + 방앗간 2개 추가하면?
만족도 = 50% + 20% + 20% = 90%
실제 생산: 60 × 0.9 = 54/시간 (+28.6% 증가)
```

---

## 만족도 계산 함수

```csharp
public float CalculateSatisfaction()
{
    float bonus = 0f;
    foreach (var building in _gameState.Buildings)
    {
        var config = ConfigBuilding.Get(building.BuildingId);
        if (config.Category == BuildingCategory.COMFORT)
        {
            var levelData = config.Levels[building.Level];
            bonus += levelData.ComfortBonus;
        }
    }
    return Mathf.Min(
        ConfigGlobal.BaseSatisfaction + bonus,
        ConfigGlobal.MaxSatisfaction
    );
}
```
